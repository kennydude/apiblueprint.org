<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <title>Developing tools for API Blueprint</title>

    <link href="//netdna.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css" rel="stylesheet" /><link href="//netdna.bootstrapcdn.com/bootstrap/3.3.2/css/bootstrap.min.css" rel="stylesheet" /><link href="/stylesheets/all-8a8eb409.css" rel="stylesheet" /><link href="/stylesheets/highlight-fcaa91aa.css" rel="stylesheet" />
    <link href='https://fonts.googleapis.com/css?family=Open+Sans:400,300' rel='stylesheet' type='text/css'>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/zepto/1.1.6/zepto.min.js"></script>
    <script src="/javascripts/all-48703023.js"></script>
  </head>

  <body class="developers">
    <header>
      <div class="container">
        <div class="navbar-header">
          <a href="/" class="navbar-brand">API Blueprint</a>

          <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
              <span class="sr-only">Toggle navigation</span>
              <span class="icon-bar"></span>
              <span class="icon-bar"></span>
              <span class="icon-bar"></span>
          </button>
        </div>

        <nav class="collapse navbar-collapse bs-navbar-collapse" role="navigation" id="navbar">
          <ul class="nav navbar-nav navbar-right">
            <li><a class="documentation" href="/documentation/">Docs</a></li>
            <li><a class="tools" href="/tools.html">Tools</a></li>
            <li><a class="developers" href="/developers.html">Developers</a></li>
            <li><a class="support" href="/support.html">Support</a></li>
          </ul>
        </nav>
      </div>
    </header>

    <div class="container page-content">
      <p>API Blueprint can be consumed via an API Blueprint parser which outputs an <a href="https://github.com/refractproject/refract-spec/blob/master/namespaces/api-description-namespace.md">API Description</a> which can be processed.</p>

<ul>
<li><a href="#using-the-command-line-tool">Command line tool</a></li>
<li><a href="#using-the-api-blueprint-parsing-service">Parsing service</a></li>
<li><a href="#using-a-parser-binding-node-js">Node.js binding</a></li>
<li><a href="#using-drafter-js-pure-javascript-parser">JavaScript parser</a></li>
<li><a href="#using-the-native-parser-interface-c-c">Native Parser</a></li>
</ul>

<p>Regardless of the parsing method, the parsing output is <a href="https://github.com/refractproject/refract-spec">Refract</a>.</p>

<h2 id="refract-api-description">Refract API Description</h2>

<p>The <a href="https://github.com/refractproject/refract-spec/blob/master/namespaces/api-description-namespace.md">Refract API Description namespace</a> is the recommended format to parse API Blueprint into, it supersedes the now deprecated API Blueprint AST. Refract is a versatile format for recursive structures. Its constructed of many element types which act as building blocks for building data structures and descriptions. Refract has namespaces which build upon the core Refract elements and adds elements for other descriptions such as API Description.</p>

<p>For example, an HTTP Response can be expressed in Refract using the following:</p>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"element"</span><span class="p">:</span><span class="w"> </span><span class="s2">"httpResponse"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"attributes"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"statusCode"</span><span class="p">:</span><span class="w"> </span><span class="mi">200</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nt">"content"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nt">"element"</span><span class="p">:</span><span class="w"> </span><span class="s2">"asset"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"attributes"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"contentType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"text/plain"</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nt">"content"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Hello World"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p>Every Refract element may have 4 attributes, the element name, Refract specific metadata, attributes specified by the element type, and a content value holding the content for the specific element.</p>

<p><strong>NOTE</strong>: <em>There are various tools for consuming Refract in JavaScript such as <a href="https://github.com/apiaryio/fury.js">Fury</a> and <a href="https://github.com/refractproject/minim">minim</a>.</em></p>

<h2 id="parsing-api-blueprint">Parsing API Blueprint</h2>

<h3 id="using-the-command-line-tool">Using the command line tool</h3>

<ol>
<li><p>Get Drafter command line tool</p>
<pre class="highlight shell"><code><span class="gp">$ </span>brew install --HEAD <span class="se">\</span>
    https://raw.github.com/apiaryio/drafter/master/tools/homebrew/drafter.rb
</code></pre>

<p>Build notes for <a href="https://github.com/apiaryio/drafter#drafter-command-line-tool">Linux</a> and <a href="https://github.com/apiaryio/drafter/wiki/Building-on-Windows">Windows</a>.</p></li>
<li><p>Parse API Blueprint into the Refract API Description namespace:</p>
<pre class="highlight shell"><code><span class="gp">$ </span>cat <span class="sh">&lt;&lt; 'EOF' | drafter --format json
# GET /message
+ Response 200 (text/plain)

        Hello World!
EOF
</span><span class="o">{</span>
  <span class="s2">"element"</span>: <span class="s2">"parseResult"</span>,
  <span class="s2">"content"</span>: <span class="o">[</span>
    <span class="o">{</span>
      <span class="s2">"element"</span>: <span class="s2">"category"</span>,

 ...
</code></pre></li>
</ol>

<h3 id="using-the-api-blueprint-parsing-service">Using the API Blueprint parsing service</h3>

<p>You can use the API Blueprint parsing service, full API documentation for the service can be found on <a href="http://docs.apiblueprintapi.apiary.io/">Apiary</a>.</p>
<pre class="highlight shell"><code><span class="gp">$ </span>curl -X POST
    --header <span class="s2">"Content-Type: text/vnd.apiblueprint"</span> <span class="se">\</span>
    --header <span class="s2">"Accept: application/vnd.refract.parse-result+json"</span> <span class="se">\</span>
    --data-binary <span class="s2">"# My API Blueprint"</span> <span class="se">\</span>
    https://api.apiblueprint.org/parser
<span class="o">{</span><span class="s2">"element"</span>:<span class="s2">"parseResult"</span>,<span class="s2">"content"</span>:[<span class="o">{</span><span class="s2">"element"</span>:<span class="s2">"category"</span>,<span class="s2">"meta"</span>:<span class="o">{</span><span class="s2">"classes"</span>:[<span class="s2">"api"</span><span class="o">]</span>,<span class="s2">"title"</span>:<span class="s2">"My API Blueprint"</span><span class="o">}</span>,<span class="s2">"content"</span>:[]<span class="o">}]}</span>
</code></pre>

<h3 id="using-a-parser-binding-node-js">Using a parser binding (Node.js)</h3>

<ol>
<li><p>Install binding for your language (e.g. <a href="https://github.com/apiaryio/protagonist">Protagonist</a> for Node.js)</p>
<pre class="highlight shell"><code><span class="gp">$ </span>npm install protagonist
</code></pre></li>
<li><p>Parse your API Blueprint into Refract</p>
<pre class="highlight javascript"><code><span class="kd">var</span> <span class="nx">protagonist</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'protagonist'</span><span class="p">);</span>

<span class="kd">var</span> <span class="nx">blueprint</span> <span class="o">=</span> <span class="s1">'''
# GET /message
+ Response 200 (text/plain)

        Hello World!
'''</span><span class="p">;</span>

<span class="nx">protagonist</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="nx">blueprint</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">error</span><span class="p">,</span> <span class="nx">result</span><span class="p">)</span> <span class="p">{</span>
    <span class="p">...</span>
<span class="p">});</span>
</code></pre></li>
</ol>

<h3 id="using-drafter-js-pure-javascript-parser">Using drafter.js (Pure JavaScript parser)</h3>

<p><a href="https://github.com/apiaryio/drafter#drafterjs"><code>drafter.js</code></a> is a pure JavaScript version of the <code>drafter</code> library. It exposes a single <code>parse</code> function which takes an API Blueprint stirng and options and returns the Refract Parse Result.</p>

<ol>
<li><p>Install drafter.js</p>

<p>Via NPM:</p>
<pre class="highlight shell"><code><span class="gp">$ </span>npm install drafter.js
</code></pre>

<p>You may also download drafter.js from the <a href="https://github.com/apiaryio/drafter/releases">releases page</a> and reference it in HTML.</p>
<pre class="highlight html"><code><span class="nt">&lt;script </span><span class="na">src=</span><span class="s">"./drafter.js"</span><span class="nt">&gt;&lt;/script&gt;</span>
<span class="nt">&lt;script </span><span class="na">src=</span><span class="s">"./drafter.js.mem"</span><span class="nt">&gt;&lt;/script&gt;</span>
</code></pre></li>
<li><p>Parse your API Blueprint into Refract</p>
<pre class="highlight javascript"><code><span class="kd">var</span> <span class="nx">blueprint</span> <span class="o">=</span> <span class="s1">'''
# GET /message
+ Response 200 (text/plain)

        Hello World!
'''</span><span class="p">;</span>

<span class="k">try</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="nx">res</span> <span class="o">=</span> <span class="nx">drafter</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="nx">blueprint</span><span class="p">,</span> <span class="p">{</span><span class="na">exportSourcemap</span><span class="p">:</span> <span class="kc">true</span><span class="p">});</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">res</span><span class="p">);</span>
<span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">err</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></li>
</ol>

<h3 id="using-the-native-parser-interface-c-c">Using the native parser interface (C/C++)</h3>

<ol>
<li><p>Build Drafter</p>
<pre class="highlight shell"><code><span class="gp">$ </span>./configure
<span class="gp">$ </span>make
</code></pre>

<p>See full <a href="https://github.com/apiaryio/drafter#build">build instructions</a></p></li>
<li><p>Parse your API Blueprint into its AST</p>
<pre class="highlight cpp"><code><span class="cp">#include "drafter.h"         // Blueprint Parser
#include "SerializeResult.h" // Result Wrapper for serialization
#include "sosJSON.h"         // Serializer
</span>
<span class="n">mdp</span><span class="o">::</span><span class="n">ByteBuffer</span> <span class="n">blueprint</span> <span class="o">=</span> <span class="n">R</span><span class="s">"(</span><span class="err">
</span><span class="s"># My API</span><span class="err">
</span><span class="s">## GET /message</span><span class="err">
</span><span class="s">+ Response 200 (text/plain)</span><span class="err">

</span><span class="s">        Hello World!</span><span class="err">
</span><span class="s">)"</span><span class="p">;</span>

<span class="c1">// Blueprint parsing
</span><span class="n">snowcrash</span><span class="o">::</span><span class="n">ParseResult</span><span class="o">&lt;</span><span class="n">snowcrash</span><span class="o">::</span><span class="n">Blueprint</span><span class="o">&gt;</span> <span class="n">ast</span><span class="p">;</span>
<span class="n">drafter</span><span class="o">::</span><span class="n">ParseBlueprint</span><span class="p">(</span><span class="n">blueprint</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">ast</span><span class="p">);</span>

<span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"API Name: "</span> <span class="o">&lt;&lt;</span> <span class="n">ast</span><span class="p">.</span><span class="n">node</span><span class="p">.</span><span class="n">name</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>

<span class="c1">// Serialization to JSON format
</span><span class="n">sos</span><span class="o">::</span><span class="n">SerializeJSON</span> <span class="n">serializer</span><span class="p">;</span>
<span class="n">serializer</span><span class="p">.</span><span class="n">process</span><span class="p">(</span><span class="n">drafter</span><span class="o">::</span><span class="n">WrapResult</span><span class="p">(</span><span class="n">ast</span><span class="p">.</span><span class="n">node</span><span class="p">,</span> <span class="n">drafter</span><span class="o">::</span><span class="n">WrapperOptions</span><span class="p">(</span><span class="n">drafter</span><span class="o">::</span><span class="n">RefractASTType</span><span class="p">)),</span> <span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="p">);</span>
</code></pre></li>
</ol>

    </div>

    <footer>
      <div class="container">
        <div>
          <ul class="social">
              <li>
                <a href="https://stackoverflow.com/questions/tagged/apiblueprint?sort=frequent&pageSize=15">
                  <img src="/images/stackoverflow-994229fe.svg" />
                  <span class="relation">FAQ</span>
                  <span class="service">Stack Overflow</span>
                </a>
              </li>
              <li>
                <a href="https://github.com/apiaryio/api-blueprint/issues">
                  <img src="/images/github-893a5b9a.svg" />
                  <span class="relation">Issues</span>
                  <span class="service">GitHub</span>
                </a>
              </li>
              <li>
                <a href="https://apiblueprint-slack.herokuapp.com/">
                  <img src="/images/slack-dba1e617.svg" />
                  <span class="relation">Chat</span>
                  <span class="service">Slack</span>
                </a>
              </li>
              <li>
                <a href="https://twitter.com/apiblueprint">
                  <img src="/images/twitter-2ade0f64.svg" />
                  <span class="relation">Twitter</span>
                  <span class="service">@apiblueprint</span>
                </a>
              </li>
          </ul>
        </div>

        <hr />

        <div class="info row">
          <div class="brand-block col-md-6">
              <img src="/images/apiblueprint-footer-81a6c64c.svg" alt="API Blueprint Logo" width=38 height=36 />
              <div class="brand-info">
                <span class="brand">API Blueprint</span>
                <span>&copy; 2013 - 2016</span>
              </div>
            </ul>
          </div>
          <ul class="nav nav-pills col-md-6 text-md-right">
            <li><a class="documentation" href="/documentation/">Docs</a></li>
            <li><a class="tools" href="/tools.html">Tools</a></li>
            <li><a class="developers" href="/developers.html">Developers</a></li>
            <li><a class="support" href="/support.html">Support</a></li>
          </ul>
        </div>
        <div class="license">API Blueprint is released under <a href="https://github.com/apiaryio/api-blueprint/blob/master/LICENSE">MIT License</a></div>
      </div>
    </footer>
    
    <div class="rocket"></div>
    <div class="moon"></div>

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
    <script src="//netdna.bootstrapcdn.com/bootstrap/3.3.2/js/bootstrap.min.js"></script>
  </body>
</html>
